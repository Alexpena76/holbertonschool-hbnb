{"ast":null,"code":"const API_BASE_URL = 'http://127.0.0.1:5000/api/v1';\nexport function getCookie(name) {\n  const cookies = document.cookie.split(';');\n  for (let cookie of cookies) {\n    const [cookieName, cookieValue] = cookie.trim().split('=');\n    if (cookieName === name) return cookieValue;\n  }\n  return null;\n}\nexport function setCookie(name, value, days = 7) {\n  const date = new Date();\n  date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n  document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/; SameSite=Strict`;\n}\nexport function removeCookie(name) {\n  document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n}\nexport function getToken() {\n  return getCookie('token');\n}\nexport function setToken(token) {\n  setCookie('token', token, 7);\n}\nexport function removeToken() {\n  removeCookie('token');\n  localStorage.removeItem('user');\n}\nfunction buildHeaders(includeAuth = false) {\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (includeAuth) {\n    const token = getToken();\n    if (token) headers['Authorization'] = `Bearer ${token}`;\n  }\n  return headers;\n}\nasync function handleResponse(response) {\n  const data = await response.json();\n  if (!response.ok) {\n    const error = new Error(data.error || data.message || 'API request failed');\n    error.status = response.status;\n    throw error;\n  }\n  return data;\n}\nexport async function login(email, password) {\n  const response = await fetch(`${API_BASE_URL}/auth/login`, {\n    method: 'POST',\n    headers: buildHeaders(),\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await handleResponse(response);\n  if (data.access_token) {\n    setToken(data.access_token);\n    if (data.user) localStorage.setItem('user', JSON.stringify(data.user));\n  }\n  return data;\n}\nexport function logout() {\n  removeToken();\n}\nexport function isAuthenticated() {\n  return !!getToken();\n}\nexport async function getPlaces() {\n  const response = await fetch(`${API_BASE_URL}/places/`, {\n    method: 'GET',\n    headers: buildHeaders(true)\n  });\n  return handleResponse(response);\n}\nexport async function getPlace(placeId) {\n  const response = await fetch(`${API_BASE_URL}/places/${placeId}`, {\n    method: 'GET',\n    headers: buildHeaders(true)\n  });\n  return handleResponse(response);\n}\nexport async function getPlaceReviews(placeId) {\n  const response = await fetch(`${API_BASE_URL}/reviews/places/${placeId}/reviews`, {\n    method: 'GET',\n    headers: buildHeaders()\n  });\n  if (response.status === 404) return [];\n  return handleResponse(response);\n}\nexport async function createReview(placeId, text, rating) {\n  const token = getToken();\n  if (!token) throw new Error('Authentication required');\n  const response = await fetch(`${API_BASE_URL}/reviews/`, {\n    method: 'POST',\n    headers: buildHeaders(true),\n    body: JSON.stringify({\n      place_id: placeId,\n      text,\n      rating\n    })\n  });\n  return handleResponse(response);\n}\nexport function getCurrentUser() {\n  const userJson = localStorage.getItem('user');\n  if (userJson) {\n    try {\n      return JSON.parse(userJson);\n    } catch (e) {\n      return null;\n    }\n  }\n  return null;\n}","map":{"version":3,"names":["API_BASE_URL","getCookie","name","cookies","document","cookie","split","cookieName","cookieValue","trim","setCookie","value","days","date","Date","setTime","getTime","toUTCString","removeCookie","getToken","setToken","token","removeToken","localStorage","removeItem","buildHeaders","includeAuth","headers","handleResponse","response","data","json","ok","error","Error","message","status","login","email","password","fetch","method","body","JSON","stringify","access_token","user","setItem","logout","isAuthenticated","getPlaces","getPlace","placeId","getPlaceReviews","createReview","text","rating","place_id","getCurrentUser","userJson","getItem","parse","e"],"sources":["/home/dmin/holbertonschool-hbnb/part4-React_Version/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'http://127.0.0.1:5000/api/v1';\n\nexport function getCookie(name) {\n    const cookies = document.cookie.split(';');\n    for (let cookie of cookies) {\n        const [cookieName, cookieValue] = cookie.trim().split('=');\n        if (cookieName === name) return cookieValue;\n    }\n    return null;\n}\n\nexport function setCookie(name, value, days = 7) {\n    const date = new Date();\n    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n    document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/; SameSite=Strict`;\n}\n\nexport function removeCookie(name) {\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n}\n\nexport function getToken() { return getCookie('token'); }\nexport function setToken(token) { setCookie('token', token, 7); }\nexport function removeToken() { removeCookie('token'); localStorage.removeItem('user'); }\n\nfunction buildHeaders(includeAuth = false) {\n    const headers = { 'Content-Type': 'application/json' };\n    if (includeAuth) {\n        const token = getToken();\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n    }\n    return headers;\n}\n\nasync function handleResponse(response) {\n    const data = await response.json();\n    if (!response.ok) {\n        const error = new Error(data.error || data.message || 'API request failed');\n        error.status = response.status;\n        throw error;\n    }\n    return data;\n}\n\nexport async function login(email, password) {\n    const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: 'POST',\n        headers: buildHeaders(),\n        body: JSON.stringify({ email, password })\n    });\n    const data = await handleResponse(response);\n    if (data.access_token) {\n        setToken(data.access_token);\n        if (data.user) localStorage.setItem('user', JSON.stringify(data.user));\n    }\n    return data;\n}\n\nexport function logout() { removeToken(); }\nexport function isAuthenticated() { return !!getToken(); }\n\nexport async function getPlaces() {\n    const response = await fetch(`${API_BASE_URL}/places/`, {\n        method: 'GET',\n        headers: buildHeaders(true)\n    });\n    return handleResponse(response);\n}\n\nexport async function getPlace(placeId) {\n    const response = await fetch(`${API_BASE_URL}/places/${placeId}`, {\n        method: 'GET',\n        headers: buildHeaders(true)\n    });\n    return handleResponse(response);\n}\n\nexport async function getPlaceReviews(placeId) {\n    const response = await fetch(`${API_BASE_URL}/reviews/places/${placeId}/reviews`, {\n        method: 'GET',\n        headers: buildHeaders()\n    });\n    if (response.status === 404) return [];\n    return handleResponse(response);\n}\n\nexport async function createReview(placeId, text, rating) {\n    const token = getToken();\n    if (!token) throw new Error('Authentication required');\n    const response = await fetch(`${API_BASE_URL}/reviews/`, {\n        method: 'POST',\n        headers: buildHeaders(true),\n        body: JSON.stringify({ place_id: placeId, text, rating })\n    });\n    return handleResponse(response);\n}\n\nexport function getCurrentUser() {\n    const userJson = localStorage.getItem('user');\n    if (userJson) {\n        try { return JSON.parse(userJson); }\n        catch (e) { return null; }\n    }\n    return null;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}